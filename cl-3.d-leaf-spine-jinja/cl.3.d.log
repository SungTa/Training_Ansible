cumulus@oob-mgmt-server:~/3.a/Ansible_Playbook$ ansible-playbook deploy_5_leaf_spine_jinja.yml
[DEPRECATION WARNING]: [defaults]hostfile option, The key is misleading as it can also be a list of hosts, a directory or a list of paths . This feature will be removed in version 2.8. Deprecation warnings can be disabled by setting
deprecation_warnings=False in ansible.cfg.

PLAY [network] ******************************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************
ok: [leaf03]
ok: [leaf01]
ok: [leaf02]

TASK [copy interfaces] **********************************************************************************************************************************************************************************************************************
changed: [leaf02]
changed: [leaf03]
changed: [leaf01]

TASK [copy frr daemons] *********************************************************************************************************************************************************************************************************************
ok: [leaf02]
ok: [leaf03]
ok: [leaf01]

TASK [copy frr conf] ************************************************************************************************************************************************************************************************************************
changed: [leaf01]
changed: [leaf02]
changed: [leaf03]

TASK [reload networking] ********************************************************************************************************************************************************************************************************************
changed: [leaf02]
changed: [leaf01]
changed: [leaf03]

TASK [reload frr] ***************************************************************************************************************************************************************************************************************************
changed: [leaf02]
changed: [leaf03]
changed: [leaf01]

PLAY [spines] *******************************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************
ok: [spine02]
ok: [spine01]

TASK [ifupdown2-spine : configure /etc/network/interfaces] **********************************************************************************************************************************************************************************
changed: [spine01]
changed: [spine02]

TASK [frr-spine : ensure frr is running] ****************************************************************************************************************************************************************************************************
ok: [spine01]
ok: [spine02]

TASK [frr-spine : configure frr daemons file] ***********************************************************************************************************************************************************************************************
ok: [spine02]
ok: [spine01]

TASK [frr-spine : configure quagga configuration] *******************************************************************************************************************************************************************************************
changed: [spine02]
changed: [spine01]

RUNNING HANDLER [ifupdown2-spine : reload networking] ***************************************************************************************************************************************************************************************
changed: [spine01]
changed: [spine02]

RUNNING HANDLER [frr-spine : check frr] *****************************************************************************************************************************************************************************************************
changed: [spine02]
changed: [spine01]

RUNNING HANDLER [frr-spine : restart frr] ***************************************************************************************************************************************************************************************************
changed: [spine02]
changed: [spine01]

PLAY [mlag-server] **************************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************
ok: [server01]

TASK [install ifenslave package] ************************************************************************************************************************************************************************************************************
ok: [server01] => (item=[u'ifenslave'])

TASK [Setup bonding module in Kernel] *******************************************************************************************************************************************************************************************************
changed: [server01]

TASK [copy interfaces] **********************************************************************************************************************************************************************************************************************
ok: [server01]

TASK [restarts servers with their new configuration] ****************************************************************************************************************************************************************************************
changed: [server01]

TASK [Wait for everything to come back up] **************************************************************************************************************************************************************************************************
ok: [server01 -> localhost]

PLAY [standalone-server] ********************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************
ok: [server03]

TASK [copy interfaces] **********************************************************************************************************************************************************************************************************************
ok: [server03]

TASK [restarts servers with their new configuration] ****************************************************************************************************************************************************************************************
changed: [server03]

TASK [Wait for everything to come back up] **************************************************************************************************************************************************************************************************
ok: [server03 -> localhost]

PLAY RECAP **********************************************************************************************************************************************************************************************************************************
leaf01                     : ok=6    changed=4    unreachable=0    failed=0
leaf02                     : ok=6    changed=4    unreachable=0    failed=0
leaf03                     : ok=6    changed=4    unreachable=0    failed=0
server01                   : ok=6    changed=2    unreachable=0    failed=0
server03                   : ok=4    changed=1    unreachable=0    failed=0
spine01                    : ok=8    changed=5    unreachable=0    failed=0
spine02                    : ok=8    changed=5    unreachable=0    failed=0

cumulus@oob-mgmt-server:~/3.a/Ansible_Playbook$ vi ifupdown2-spine/templates/interfaces.j2
cumulus@oob-mgmt-server:~/3.a/Ansible_Playbook$ ssh server01
Welcome to Ubuntu 16.04 LTS (GNU/Linux 4.4.0-127-generic x86_64)

 * Documentation:  https://help.ubuntu.com/

152 packages can be updated.
2 updates are security updates.


Last login: Tue May 29 11:46:31 2018 from 192.168.0.254
cumulus@server01:~$ ping 172.16.2.101
PING 172.16.2.101 (172.16.2.101) 56(84) bytes of data.
64 bytes from 172.16.2.101: icmp_seq=1 ttl=61 time=5.23 ms
64 bytes from 172.16.2.101: icmp_seq=2 ttl=61 time=3.39 ms
64 bytes from 172.16.2.101: icmp_seq=3 ttl=61 time=3.32 ms
64 bytes from 172.16.2.101: icmp_seq=4 ttl=61 time=3.27 ms
64 bytes from 172.16.2.101: icmp_seq=5 ttl=61 time=3.48 ms
64 bytes from 172.16.2.101: icmp_seq=6 ttl=61 time=4.16 ms
64 bytes from 172.16.2.101: icmp_seq=7 ttl=61 time=2.99 ms
64 bytes from 172.16.2.101: icmp_seq=8 ttl=61 time=2.85 ms
^C
--- 172.16.2.101 ping statistics ---
8 packets transmitted, 8 received, 0% packet loss, time 7014ms
rtt min/avg/max/mdev = 2.857/3.590/5.230/0.719 ms
cumulus@server01:~$ exit
logout
Connection to server01 closed.
cumulus@oob-mgmt-server:~/3.a/Ansible_Playbook$ ssh server03
Welcome to Ubuntu 16.04 LTS (GNU/Linux 4.4.0-127-generic x86_64)

 * Documentation:  https://help.ubuntu.com/

152 packages can be updated.
2 updates are security updates.


Last login: Tue May 29 11:46:39 2018 from 192.168.0.254
cumulus@server03:~$ ping 172.16.1.101
PING 172.16.1.101 (172.16.1.101) 56(84) bytes of data.
64 bytes from 172.16.1.101: icmp_seq=1 ttl=61 time=3.04 ms
64 bytes from 172.16.1.101: icmp_seq=2 ttl=61 time=3.08 ms
64 bytes from 172.16.1.101: icmp_seq=3 ttl=61 time=3.14 ms
64 bytes from 172.16.1.101: icmp_seq=4 ttl=61 time=2.96 ms
64 bytes from 172.16.1.101: icmp_seq=5 ttl=61 time=3.01 ms
64 bytes from 172.16.1.101: icmp_seq=6 ttl=61 time=2.93 ms

